repos:
  # Python linting, formatting, and type checking (per-project, requires uv)
  - repo: local
    hooks:
      - id: ruff-sqlalchemy
        name: ruff (sqlalchemy)
        entry: uv run --project python/sqlalchemy ruff check --fix
        language: system
        files: ^python/sqlalchemy/.*\.py$
        pass_filenames: false
      - id: ruff-format-sqlalchemy
        name: ruff format (sqlalchemy)
        entry: uv run --project python/sqlalchemy ruff format
        language: system
        files: ^python/sqlalchemy/.*\.py$
        pass_filenames: false
      - id: pyright-sqlalchemy
        name: pyright (sqlalchemy)
        entry: uv run --project python/sqlalchemy pyright --project python/sqlalchemy
        language: system
        files: ^python/sqlalchemy/.*\.py$
        pass_filenames: false

      - id: ruff-tortoise
        name: ruff (tortoise-orm)
        entry: uv run --project python/tortoise-orm ruff check --fix
        language: system
        files: ^python/tortoise-orm/.*\.py$
        pass_filenames: false
      - id: ruff-format-tortoise
        name: ruff format (tortoise-orm)
        entry: uv run --project python/tortoise-orm ruff format
        language: system
        files: ^python/tortoise-orm/.*\.py$
        pass_filenames: false
      - id: pyright-tortoise
        name: pyright (tortoise-orm)
        entry: uv run --project python/tortoise-orm pyright --project python/tortoise-orm
        language: system
        files: ^python/tortoise-orm/.*\.py$
        pass_filenames: false

      - id: ruff-django
        name: ruff (django)
        entry: uv run --project python/django ruff check --fix
        language: system
        files: ^python/django/.*\.py$
        pass_filenames: false
      - id: ruff-format-django
        name: ruff format (django)
        entry: uv run --project python/django ruff format
        language: system
        files: ^python/django/.*\.py$
        pass_filenames: false

  # Python license headers
  - repo: https://github.com/Lucas-C/pre-commit-hooks
    rev: v1.5.5
    hooks:
      - id: insert-license
        files: ^python/.*\.py$
        args: [--license-filepath=LICENSE_HEADER.txt]

  # Java formatting
  - repo: https://github.com/macisamuele/language-formatters-pre-commit-hooks
    rev: v2.14.0
    hooks:
      - id: pretty-format-java
        args: [--autofix]

  # YAML formatting
  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: v4.0.0-alpha.8
    hooks:
      - id: prettier
        types: [yaml]

  # Prisma formatting (uses prettier from node/prisma package.json)
  - repo: local
    hooks:
      - id: prettier-prisma
        name: prettier (prisma)
        entry: npx --prefix node/prisma prettier --write
        language: system
        files: ^node/prisma/
        types_or: [ts, javascript, json]

  # GitHub Actions linting
  - repo: https://github.com/rhysd/actionlint
    rev: v1.7.7
    hooks:
      - id: actionlint

  # Secrets detection
  - repo: https://github.com/gitleaks/gitleaks
    rev: v8.21.2
    hooks:
      - id: gitleaks
